<!-- Popup Overlay -->

<div id="key-add-screen"
    class="ui-popup-screen ui-overlay-b ui-screen-hidden">
</div>

<!-- Popup Wrapper -->

<div id="key-add-popup"
    class="flip
        ui-popup-container
        ui-popup-hidden
        ui-popup-truncate">

    <!-- Popup -->

    <div id="key-add"
        class="large-popup
            ui-popup
            ui-body-inherit
            ui-overlay-shadow
            ui-corner-all"
        data-role="popup"
        data-enhanced="true"
        data-position-to="origin"
        data-transition="flip">


        <!-- Header -->

        <div class="ui-header ui-bar-b" role="banner">

            <h1 class="ui-title">Add key</h1>

        </div>

        <!-- Body -->

        <div class="ui-content ui-body-a" role="main">

            <!-- Key Name Field -->

            <label for="key-add-id">Name:</label>

            {{view Mist.TextField id="key-add-id"
                   valueBinding="Mist.keyAddController.keyId"}}

            <!-- Key Private Field -->

            <label for="key-add-private">Private Key:
                {{#if Mist.keyAddController.generatingKey}}
                    <div class="ajax-loader key-add-loader"></div>
                {{else}} {{#if Mist.keyAddController.uploadingKey}}
                    <div class="ajax-loader key-add-loader"></div>
                {{/if}} {{/if}}
            </label>

            {{view Ember.TextArea id="key-add-private"
                   valueBinding="Mist.keyAddController.keyPrivate"}}

            <!-- Generate and Upload buttons -->

            <div class="generate-upload
                    ui-controlgroup
                    ui-controlgroup-horizontal
                    ui-group-theme-a
                    ui-corner-all"
                data-role="controlgroup"
                data-type="horizontal">

                <a class="ui-btn ui-btn-icon-left ui-icon-gear"
                    {{action "generateClicked" target="view"}}>
                        Generate
                </a>

                <a class="ui-btn ui-btn-icon-right ui-icon-arrow-u"
                    {{action "uploadClicked" target="view"}}>
                        Upload
                </a>
            </div>

            <!-- Hidden Input field for uploading ssh keys -->

            <input id="key-add-upload" type="file" name="file"
                {{action "uploadInputChanged" on="change" target="view"}}/>

            {{#if Mist.keyAddController.addingKey}}
                <div class="ajax-loader"></div>
            {{/if}}

            <!-- Back and Add buttons -->

            <div class="ok-cancel
                    ui-controlgroup
                    ui-controlgroup-horizontal
                    ui-group-theme-a
                    ui-corner-all"
                data-role="controlgroup"
                data-type="horizontal">

                <a class="ui-btn"
                    {{action "backClicked" target="view"}}>
                        Back
                </a>
                <a id="key-add-ok" class="ui-btn ui-btn-d ui-state-disabled"
                    {{action "addClicked" target="view"}}>
                        Add
                </a>
            </div>

        </div>
    </div>
</div>
